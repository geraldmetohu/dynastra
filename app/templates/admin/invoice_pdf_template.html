<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <style>
    body {
      font-family: 'Segoe UI', sans-serif;
      padding: 2rem;
      background-color: white;
      color: #333;
    }
    .header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 2rem;
    }
    .logo {
      max-height: 80px;
    }
    .title {
      font-size: 2rem;
      font-weight: bold;
    }
    .section {
      margin-bottom: 2rem;
    }
    .section h3 {
      margin-bottom: 0.5rem;
      font-size: 1.2rem;
      border-bottom: 1px solid #ccc;
    }
    .info, .bank {
      display: flex;
      flex-wrap: wrap;
      gap: 2rem;
    }
    .info div, .bank div {
      flex: 1;
    }
    table {
      width: 100%;
      border-collapse: collapse;
    }
    th, td {
      border: 1px solid #ccc;
      padding: 0.5rem;
      text-align: left;
    }
    th {
      background-color: #f3f3f3;
    }
    .total {
      text-align: right;
      font-weight: bold;
    }
  </style>
</head>
<body>
  <div class="header">
    {% if invoice.logoPath %}<img src="/static/{{ invoice.logoPath }}" class="logo" />{% endif %}
    <div class="title">INVOICE</div>
  </div>

  <div class="section info">
    <div>
      <h3>Bill To:</h3>
      {{ invoice.client.name }} {{ invoice.client.surname }}<br>
      {{ invoice.client.email }}<br>
      {{ invoice.client.phone }}<br>
      {{ invoice.client.address }}
    </div>
    <div>
      <h3>Invoice Info:</h3>
      Invoice ID: {{ invoice.id }}<br>
      Invoice Date: {{ invoice.invoiceDate.strftime('%Y-%m-%d') }}<br>
      Due Date: {{ invoice.dueDate.strftime('%Y-%m-%d') }}<br>
      Type: {{ invoice.invoiceType|capitalize }}<br>
    </div>
  </div>

  <div class="section">
    <h3>Services</h3>
    <table>
      <thead>
        <tr><th>Description</th><th>Price (£)</th></tr>
      </thead>
      <tbody>
        {% for service in invoice.services %}
        <tr>
          <td>{{ service.description }}</td>
          <td>{{ '%.2f'|format(service.price) }}</td>
        </tr>
        {% endfor %}
        <tr>
          <td class="total">Total</td>
          <td class="total">£{{ '%.2f'|format(invoice.total) }}</td>
        </tr>
      </tbody>
    </table>
  </div>

  <div class="section bank">
    <div>
      <h3>Bank Details</h3>
      Account Name: {{ invoice.accountName }}<br>
      Sort Code: {{ invoice.sortCode }}<br>
      Account Number: {{ invoice.accountNumber }}<br>
      {% if invoice.iban %}IBAN: {{ invoice.iban }}<br>{% endif %}
    </div>
  </div>

  <div class="section">
    <p>Thank you for your business.</p>
  </div>
</body>
</html>
